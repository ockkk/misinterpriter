## 반복문에서 i++는 이제 그만

### 왜 ++i를 쓰는 것이 i++을 쓰는 것보다 더 나을까? (전위 증감 vs 후위 증감) 

#### Introduction

for 반복문을 작성해 본 적이 있나요? 그렇다면, 아마도 반복 변수를 증가시키기 위해 `i++` 후위 증감 연산자(post increment)를 사용했을 가능성이 높을 것 같습니다. 하지만, 왜 후위 연산자를 사용하는지 생각해 본 적이 있나요? 

기존 `i` 변수 값에 1만큼 더해지는 것이, `i++`의 결과값이라는 사실은 명백합니다. 그게 우리가 의도한 것이고요. 하지만, 1만큼 더 증가시키기 위한 방법은 그 외에도 다양합니다. `i++`뿐 아니라, `++i`나 `i = i + 1`도 있지요.

이 글에서는, 1을 더하기 위한 두 가지 방법인 `++i`와 `i++`에 대해 다뤄보겠습니다. 그리고 대다수의 상황에서 `++i`가 `i++`보다 왜 더 나은지에 대해서도 설명하도록 하겠습니다.

#### 후위 증감 연산자(i++)

`i++` 방식(후위 증감)은 가장 흔한 방식일 겁니다.

아래의 의사 코드를 통해, 후위 증감 연산자가 변수 `i`에 대해 작동하는 방식을 나타내 보았습니다.

```python
int j = i;
i = i + 1;
return j;
```

​	역주: js로 번역을 해 보았습니다..*

```js
var j = i;
i = i + 1;
return j;
```

후위 증감 연산자는 `i`의 기존 값을 반환해야 하며, 반면 증감된 값인 `i+1`를 반환하지는 않습니다. 따라서 `i`의 증감 전 값을 저장해야 합니다.

그러나 대다수 경우에서, `i`의 증감 전 값은 사용되지 않고 버려지게 됩니다. 따라서, 이러한 패턴을 따른다면 `i`의 원래 값을 저장하기 위해 쓸모 없는 추가 메모리를 사용하게 됩니다.



#### 전위 증감 연산자(++i)

`++i` 방식(전위 증감)은 `i++`에 비해 훨씬 낯선 방식입니다. 보통 C 혹은 C++을 사용하는, 오래 전 개발자들이 많이 애용했던 방식입니다.

의사 코드를 통해 전위 증감 연산자의 작동 방식을 간략히 표현해 보았습니다.

```python
i = i + 1
return i
```

여기서 주목해야할 점은, `i`의 증감 전 값을 저장할 필요가 없다는 것입니다. 단순히 `i`에 1을 더하고 반환만 해 주면 됩니다. for 반복문의 일반적인 사용 예를 생각해 봅시다. `i`의 원래 값이 필요한 경우는 매우 드물죠? 때문에 후위 증감 연산자를 사용하는 것이 맥락상 더 적합하다고 할 수 있겠습니다.



#### 적합성에 대하여

지금까지 선위 연산자와 후위 연산자의 차이점을 살펴보았습니다. 캐시 된 `i`값, 다시 말해 원래 `i` 값은 증가된 후에는 쓰이지 않습니다. 때문에 컴파일러는 두 연산자가 같은 기능을 수행하도록, 기존의 `i`값이 쓰인 부분을 최적화합니다. 

정수와 같은 원시 타입에서는 이러한 방식으로 거의 예외 없이 동작할 겁니다.

그러나 사용자 정의 타입(user-defined types) 또는 증감 작업이 과하게 쓰인 반복문(iterators with the `+` operation overloaded)처럼, 좀 더 복잡한 자료형의 경우 선위 연산자를 사용하는 데에 주의를 요합니다. 컴파일러가 캐싱 작동을 제대로 최적화하지 못할 수도 있기 때문입니다.

정리하자면, 대부분의 경우 선위 연산자는 후위 연산자보다 훨씬 낫거나, 최소한 동등하게 작동합니다. 증감 전 값에 접근할 필요가 없다면 전위 연산자를 사용해 보세요.



[출처](https://medium.com/better-programming/here-are-11-console-commands-every-developer-should-know-54e348ef22fa)

